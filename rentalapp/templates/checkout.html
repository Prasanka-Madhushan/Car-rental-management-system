<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- custom css file link  -->
    <link rel="stylesheet" href=" {% static 'css/style.css' %} ">
    <script src="https://www.paypal.com/sdk/js?client-id=AZdhUZs01PvFqyCgwoJdLvY7F0qPi3acJYbata5Y-oAUJOjVgcph3DKXfBl7iJY5Lb77UQMU9Dfd_Oq-&currency=USD"></script>
</head>
<body>
    <header class="header">

        <div id="menu-btn" class="fas fa-bars"></div>
    

        <a href="/index" class="logo"> <span>RAV</span>cars </a>

        <nav class="navbar">
            <a href="/index">home</a>
            <a href="/vehicles">vehicles</a>
            <a href="/services">services</a>
<!--            <a href=" {% static '#featured' %} ">featured</a>-->
<!--            <a href=" {% static '#reviews' %} ">reviews</a>-->
            <a href=" /feedback ">feedback</a>
            <a href="/contact">contact</a>
        </nav>
{#        {% if user.is_authenticated %}#}
        <div id="login-btn" class="login-btn">
            <button class="btn">checkout</button>
<!--            <i class="far fa-user"></i>-->
        </div>
{#        {% endif %}#}

    </header>

    <div class="login-form-container">

    {% if messages %}
        {% for msg in messages %}
            <div class="alert alert-{{ msg.tags }} alert-dismissible fade show" role="alert">
              <strong>{{ msg }}</strong>
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
        {% endfor %}
    {% endif %}
        <span id="close-login-form" class="fas fa-times"></span>

        <form action="/booking" method="post">
            {% csrf_token %}
            <h3>checkouts</h3>

            <h1>{{ vehicle.vehicle_name }}</h1>
{#            <p>Rent par Day : <div class="price">{{ vehicle.rent_per_day }}/-</div></p>#}
            <div><p>Rent par Day :</p>
                <h1>{{ vehicle.rent_per_day }}/-</h1></div>
            <input type="date" name="sdate" placeholder="start date" class="box" title="Please Enter a Starting date" required>
            <input type="date" name="edate" placeholder="last date" class="box" title="Please Enter a end date" required>
            <input type="hidden" name="vid" value="{{ vehicle.id }}" placeholder="last date" class="box">
            <input type="hidden" name="dollar" value="{{ vehicle.rent_per_day }}" placeholder="last date" class="box">
{#            {% if user.is_authenticated %}#}
            <input type="submit" value="checkout" class="btn">
       
            <p style="color:black">  <a  style="color:black">NOTE: If you click on the checkout button your booking will be done by cash mode</a> </p>
            <p style="color:black">  <a  style="color:black">NOTE: If you don't pick up your Booked Car within in 9 AM to 10 PM,your booking will be cancelled</a> </p>
            {% comment %} <div id="paypal-button-container"></div> {% endcomment %}
            
{#            {% endif %}#}
        </form>

    </div>


    <form action="">
        {% csrf_token %}
        <h3>checkouts</h3>
        <input type="text" placeholder="username" class="box">
        <input type="email" placeholder="your mail id" class="box">
        <input type="text" class="box" placeholder="total days for rent">
        <input type="text" placeholder="vehicle model" class="box">
        <input type="date" placeholder="start  date" class="box">
        <input type="date" placeholder="last date" class="box">
        <input type="submit" value="checkout" class="btn" name="" id="">
    </form>



    <section class="featured" id="featured">

        <h1 class="heading"> <span>your</span> cars </h1>

        <div class="swiper featured-slider">

           <div class="swiper-wrapper">

                <div class="swiper-slide box">
                    <img src=" /media/{{ vehicle.vehicle_photo }}" alt="">
                    <div class="content">
                        <h3>{{ vehicle.vehicle_name }}</h3>
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>

                        </div>
                        <span class="fas fa-circle"></span> {{ vehicle.vehicle_description}}

                        <div class="price">{{ vehicle.rent_per_day }}</div>
<!--                        <div id="btn" >-->
<!--                            <button class="btn" > <a href=" {% static 'checkoutform.html' %} "> checkout</a></button>-->
<!--&lt;!&ndash;                            <i class="far fa-user"></i>&ndash;&gt;-->
<!--                        </div>-->
                     </div>
                </div>
            </div>
        </div>
    </section>


    <section class="footer" id="footer">

        <div class="box-container">


            <div class="box">
                <h3>quick links</h3>
                <a href="index"> <i class="fas fa-arrow-right"></i> home </a>
                <a href="vehicles"> <i class="fas fa-arrow-right"></i> vehicles </a>
                <a href="services"> <i class="fas fa-arrow-right"></i> services </a>
                <a href="#"> <i class="fas fa-arrow-right"></i> featured </a>
                <a href="feedback"> <i class="fas fa-arrow-right"></i> reviews </a>
                <a href="contact"> <i class="fas fa-arrow-right"></i> contact </a>
            </div>

            <div class="box">
                <h3>contact info</h3>
                <a href="#"> <i class="fas fa-phone"></i> +65 12345678 </a>
                <a href="#"> <i class="fas fa-phone"></i> +65 98765643 </a>
                <a href="#"> <i class="fas fa-envelope"></i> RAVcarz@gmail.com </a>
                <a href="#"> <i class="fas fa-map-marker-alt"></i> Senton way, 06603, SG </a>
            </div>

            ]

        </div>

        <div class="credit"> Â© 2025 RAVcarz, Inc. All Rights Reserved </div>

    </section>

    <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>

    <script src=" {% static 'js/script.js' %} "></script>
    {% comment %} <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        
          paypal.Buttons({
              // Sets up the transaction when a payment button is clicked
              style: {
                shape: 'rect',
                color: 'gold',
                layout: 'vertical',
                label: 'paypal',
                
              },
             
              createOrder: (data, actions) => {
                var a=document.getElementById('a1').innerText
                return actions.order.create({
                 
                  purchase_units: [{
                    
                    amount: {
                      value: a//'{{total_price | stringformat:"d"}}' // Can also reference a variable or function
                    }
                  }]
                });
              },
              // Finalize the transaction after payer approval
              onApprove: (data, actions) => {
                return actions.order.capture().then(function(orderData) {
                  // Successful capture! For dev/demo purposes:
                //   console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                //   const transaction = orderData.purchase_units[0].payments.captures[0];
                //   alert(`Transaction ${transaction.status}: ${transaction.id}\n\nSee console for all available details`);
                  // When ready to go live, remove the alert and show a success message within this page. For example:
                  // const element = document.getElementById('paypal-button-container');
                  // element.innerHTML = '<h3>Thank you for your payment!</h3>';
                  // Or go to another URL:  actions.redirect('thank_you.html');
                  var id = $("[name='id']").val();
                  var emailpatient = $("[name='emailpatient']").val();
                  var emaildoc = $("[name='emaildoc']").text();
                  var phone_patient = $("[name='phone_patient']").val();
                  var phone_doc = $("[name='phone_doc']").text();
                 
                var time = $("[name='time']").val();
                var appointment_time = $("[name='appointment_time']").val();
                var patient_name = $("[name='patient_name']").val();
                var doc_name = $("[name='doc_name']").text();
                var price = $("#a1").text();   
                var appointment_Date = $("[name='appointment_Date']").val();
                  data = {
                      "id":id,
                      "emailpatient":emailpatient,
                      "emaildoc": emaildoc,
                      "phone_patient":phone_patient,
                      "phone_doc":phone_doc,
                      "appointment_time":appointment_time,
                      "doc_name":doc_name,
                      "patient_name":patient_name,
                      "time":time,
                      "price":price,
                      "appointment_Date":appointment_Date,
                    
                  }
                  $.ajax({
                    method:"POST",
                    url: "/appointmentconfi",
                    data: data,
                    success: function (response) {
                      swal("congratulations!",response.status,"success").then((value)=>{
                       window.location.href='/patient'
                      
                     });
                     }
                    
                  });
                });
                
              }
              
            }).render('#paypal-button-container');
          </script>  {% endcomment %}
          
</body>
</html>